(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(8),o=a.n(r),i=a(11),s=a(4),l=a(5),u=a(7),g=a(6),h=a(10),m=a.n(h);m.a.defaults.baseURL="https://pixabay.com";var d=function(e,t){return m.a.get("/api/?q=".concat(e,"&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12&key=").concat("20312002-359243adeeeebb2bc74e90a1f")).then((function(e){return e.data.hits}))},p=(a(43),a(0)),b=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={searchQuery:""},e.handleChange=function(t){e.setState({searchQuery:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.searchQuery),e.setState({searchQuery:""})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",onSubmit:this.handleSubmit,children:Object(p.jsxs)("form",{className:"SearchForm",children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,value:this.state.searchQuery,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(n.Component),j=function(e){var t=e.image,a=e.onImageClick,n=e.largeImageURL,c=e.tags;return Object(p.jsx)("li",{className:"ImageGalleryItem",children:Object(p.jsx)("img",{src:t,alt:c,className:"ImageGalleryItem-image",onClick:function(){return a(n)}})})},f=(a(45),function(e){var t=e.images,a=e.onImageClick;return Object(p.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,n=e.webformatURL,c=e.largeImageURL,r=e.tags;return Object(p.jsx)(j,{image:n,tags:r,onImageClick:a,largeImageURL:c},t)}))})}),O=(a(46),function(e){var t=e.onClick;return Object(p.jsx)("div",{className:"Button",children:Object(p.jsx)("button",{type:"button",onClick:t,children:"Load more"})})}),y=a(20),v=a.n(y),k=(a(67),a(68),function(){return Object(p.jsx)(v.a,{className:"Spinner",type:"ThreeDots",color:"#3f51b5",height:80,width:80})}),I=(a(69),document.getElementById("modalRoot")),C=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={},e.handleOverlayClick=function(t){return"Escape"===t.code&&e.props.toggleModal()},e.handleBackDropClick=function(t){return t.target===t.currentTarget&&e.props.toggleModal()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleOverlayClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleOverlayClick)}},{key:"render",value:function(){var e=this.props.largeImg;return Object(r.createPortal)(Object(p.jsx)("div",{className:"Overlay",onClick:this.handleBackDropClick,children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{src:e,alt:""})})}),I)}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={images:[],query:"",page:1,isLoading:!1,modalIsOpen:!1,largeImg:""},e.onInputChange=function(t){e.setState({images:[],query:t,page:1})},e.fetchImages=function(){var t=e.state,a=t.query,n=t.page;return e.setState({isLoading:!0}),d(a,n).then((function(t){console.log(t),e.setState((function(e){var a=e.images,n=e.page;return{images:[].concat(Object(i.a)(a),Object(i.a)(t)),page:n+1}}))})).finally((function(){return e.setState({isLoading:!1})}))},e.onImageClick=function(t){e.setState({largeImg:t}),e.toggleModal()},e.onButtonClick=function(){e.fetchImages(e.state.query).then((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.toggleModal=function(){e.setState((function(e){return{modalIsOpen:!e.modalIsOpen}}))},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.query!==this.state.query&&this.fetchImages()}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(b,{onSubmit:this.onInputChange}),Object(p.jsx)(f,{images:this.state.images,onImageClick:this.onImageClick}),this.state.isLoading&&Object(p.jsx)(k,{}),this.state.images.length>0&&Object(p.jsx)(O,{onClick:this.onButtonClick}),this.state.modalIsOpen&&Object(p.jsx)(C,{toggleModal:this.toggleModal,largeImg:this.state.largeImg})]})}}]),a}(n.Component);a(70),a(71);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.ea485bca.chunk.js.map